<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poop Leaderboard</title>
<style>
  body { font-family: sans-serif; padding: 2rem; background: #f0f0f0; }
  h1 { text-align: center; }
  .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
  .item { background: white; padding: 0.5rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .item img { max-width: 100%; border-radius: 6px; }
  .item .info { margin-top: 0.5rem; font-size: 0.85rem; color: #555; }
</style>
</head>
<body>

<h1>Latest Poops</h1>
<div id="gallery" class="gallery"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.6.0/tabletop.min.js"></script>
<script>
const SHEET_URL = "https://docs.google.com/spreadsheets/d/1MpbHvg3T6gLetHKB-x4X4o1JWPZf74Rb3fa62RZ7CZc/edit?usp=sharing";

function init() {
  Tabletop.init({
    key: SHEET_URL,
    simpleSheet: true,
    callback: displayImages
  });
}

function displayImages(data) {
  const gallery = document.getElementById("gallery");

  // Sort latest first
  data.sort((a,b) => new Date(b.Timestamp) - new Date(a.Timestamp));

  data.forEach(entry => {
    // Use your thumbnail URL format
    const imgUrl = `https://drive.google.com/thumbnail?id=${entry.FileID}&sz=w1000`;

    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <img src="${imgUrl}" alt="Poop Image">
      <div class="info">
        <strong>${entry.Sender}</strong><br>
        ${entry.Timestamp}
      </div>
    `;
    gallery.appendChild(div);
  });
}

window.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
