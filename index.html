<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Poop Leaderboard</title>
  <style>
    body { font-family: sans-serif; background: #f0f0f0; }
    h1 { text-align: center; }
    .gallery { display: flex; flex-wrap: wrap; justify-content: center; }
    .card {
      background: white;
      border: 1px solid #ccc;
      margin: 10px;
      padding: 5px;
      text-align: center;
      width: 160px;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.2);
    }
    .card img { max-width: 150px; max-height: 150px; display: block; margin: 0 auto 5px; }
    .card .info { font-size: 12px; color: #555; }
  </style>
</head>
<body>
  <h1>Latest Poops</h1>
  <div class="gallery" id="gallery"></div>

  <script>
    const webAppUrl = 'YOUR_WEB_APP_URL_HERE'; // paste your Apps Script Web App URL

    async function loadGallery() {
      try {
        const res = await fetch(webAppUrl);
        const data = await res.json();

        // Sort by timestamp descending
        data.sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));

        const gallery = document.getElementById('gallery');
        gallery.innerHTML = '';

        data.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card';

          const img = document.createElement('img');
          img.src = item.imageUrl;
          card.appendChild(img);

          const info = document.createElement('div');
          info.className = 'info';
          info.innerText = `${item.sender}\n${new Date(item.timestamp).toLocaleString()}`;
          card.appendChild(info);

          gallery.appendChild(card);
        });
      } catch (err) {
        console.error('Error loading gallery:', err);
      }
    }

    loadGallery();
    // Refresh every 5 minutes
    setInterval(loadGallery, 300000);
  </script>
</body>
</html>
